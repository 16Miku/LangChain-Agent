# ============================================================
# RAG Service - Environment Variables
# ============================================================

# Service
SERVICE_NAME=rag-service
DEBUG=false

# ============================================================
# Database Configuration
# ============================================================

# --- Option 1: SQLite (本地测试) ---
DATABASE_URL=sqlite:///./rag_test.db

# --- Option 2: Supabase PostgreSQL (生产推荐) ---
# DATABASE_URL=postgresql://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:6543/postgres

# --- Option 3: Local PostgreSQL ---
# DATABASE_URL=postgresql://postgres:postgres@localhost:5432/streamagent

# ============================================================
# Vector Store Configuration
# ============================================================

# Backend 选择: "pgvector" (推荐) 或 "milvus"
VECTOR_STORE_BACKEND=pgvector

# --- pgvector 配置 (使用 DATABASE_URL) ---
PGVECTOR_ENABLED=true

# --- Milvus 配置 (可选) ---
MILVUS_ENABLED=false
MILVUS_HOST=localhost
MILVUS_PORT=19530
MILVUS_COLLECTION=document_chunks

# ============================================================
# Embedding Configuration
# ============================================================

# Embedding 模型 (本地运行)
EMBEDDING_MODEL=all-MiniLM-L6-v2
EMBEDDING_DIMENSION=384

# ============================================================
# Search Configuration
# ============================================================

# 默认检索数量
DEFAULT_TOP_K=10

# 混合检索权重 (0-1, 向量权重，1-alpha 为 BM25 权重)
DEFAULT_ALPHA=0.5

# 启用重排序
ENABLE_RERANK=true

# ============================================================
# Reranker Configuration (可选)
# ============================================================

# 是否使用 CrossEncoder 重排序 (需要下载模型)
RERANKER_ENABLED=false
RERANKER_MODEL=BAAI/bge-reranker-base

# ============================================================
# File Storage Configuration (可选)
# ============================================================

# --- MinIO (本地部署) ---
MINIO_ENABLED=false
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET=documents
MINIO_SECURE=false

# --- Supabase Storage (云部署) ---
SUPABASE_URL=https://[project-ref].supabase.co
SUPABASE_ANON_KEY=your-supabase-anon-key

# ============================================================
# Document Parsing (可选)
# ============================================================

# MinerU API (智能文档解析)
MINERU_API_KEY=your-mineru-api-key
MINERU_API_URL=https://mineru.datadance.cn/api/v1

# ============================================================
# Security Configuration
# ============================================================

# JWT 验证 (生产环境必须启用)
JWT_ENABLED=false
JWT_SECRET=your-super-secret-key-change-in-production
JWT_ALGORITHM=HS256

# 微服务间调用密钥
INTERNAL_SERVICE_KEY=internal-service-key-change-in-production
